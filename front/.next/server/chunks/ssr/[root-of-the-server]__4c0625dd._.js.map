{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 127, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/joaov/OneDrive/%C3%81rea%20de%20Trabalho/programa%C3%A7%C3%A3o/trilha/projeto3-trilha/front/src/services/api.ts"],"sourcesContent":["import axios from \"axios\";\r\n\r\nconst api = axios.create({\r\n  baseURL: process.env.NEXT_PUBLIC_API_URL || \"http://localhost:8000\",\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n  },\r\n});\r\n\r\n// Fun√ß√µes de Autentica√ß√£o\r\nexport const loginUser = async (username: string, password: string) => {\r\n  try {\r\n    const response = await api.post(\"/users/login\", { username, password });\r\n    return {\r\n      success: true,\r\n      data: response.data,\r\n      message: response.data.message || \"Login bem-sucedido!\"\r\n    };\r\n  } catch (error: any) {\r\n    return {\r\n      success: false,\r\n      message: error.response?.data?.detail || \"Erro ao fazer login\"\r\n    };\r\n  }\r\n};\r\n\r\nexport const registerUser = async (username: string, password: string) => {\r\n  try {\r\n    const response = await api.post(\"/users/register\", { username, password });\r\n    return {\r\n      success: true,\r\n      data: response.data,\r\n      message: \"Registro bem-sucedido!\"\r\n    };\r\n  } catch (error: any) {\r\n    return {\r\n      success: false,\r\n      message: error.response?.data?.detail || \"Erro ao registrar usu√°rio\"\r\n    };\r\n  }\r\n};\r\n\r\n// Fun√ß√µes de Posts\r\nexport const getPosts = async () => {\r\n  try {\r\n    const response = await api.get(\"/posts\");\r\n    return response.data;\r\n  } catch (error: any) {\r\n    throw new Error(error.response?.data?.detail || \"Failed to fetch posts\");\r\n  }\r\n};\r\n\r\nexport const createPost = async (content: string, userId: number) => {\r\n  try {\r\n    const response = await api.post(\"/posts\", {\r\n      content,\r\n      user_id: userId\r\n    });\r\n    return response.data;\r\n  } catch (error: any) {\r\n    throw new Error(error.response?.data?.detail || \"Failed to create post\");\r\n  }\r\n};\r\n\r\nexport const handleReaction = async (postId: number, userId: number, type: 'like' | 'dislike') => {\r\n  try {\r\n    const response = await api.post(`/posts/${postId}/react`, {\r\n      user_id: userId,\r\n      type\r\n    });\r\n    return response.data;\r\n  } catch (error: any) {\r\n    throw new Error(error.response?.data?.detail || \"Failed to add reaction\");\r\n  }\r\n};\r\n\r\n// Interceptor para adicionar token de autentica√ß√£o (opcional)\r\napi.interceptors.request.use((config) => {\r\n  const token = localStorage.getItem(\"authToken\");\r\n  if (token) {\r\n    config.headers.Authorization = `Bearer ${token}`;\r\n  }\r\n  return config;\r\n});\r\n\r\nexport default api;"],"names":[],"mappings":";;;;;;;;AAAA;;AAEA,MAAM,MAAM,qIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACvB,SAAS,6DAAmC;IAC5C,SAAS;QACP,gBAAgB;IAClB;AACF;AAGO,MAAM,YAAY,OAAO,UAAkB;IAChD,IAAI;QACF,MAAM,WAAW,MAAM,IAAI,IAAI,CAAC,gBAAgB;YAAE;YAAU;QAAS;QACrE,OAAO;YACL,SAAS;YACT,MAAM,SAAS,IAAI;YACnB,SAAS,SAAS,IAAI,CAAC,OAAO,IAAI;QACpC;IACF,EAAE,OAAO,OAAY;QACnB,OAAO;YACL,SAAS;YACT,SAAS,MAAM,QAAQ,EAAE,MAAM,UAAU;QAC3C;IACF;AACF;AAEO,MAAM,eAAe,OAAO,UAAkB;IACnD,IAAI;QACF,MAAM,WAAW,MAAM,IAAI,IAAI,CAAC,mBAAmB;YAAE;YAAU;QAAS;QACxE,OAAO;YACL,SAAS;YACT,MAAM,SAAS,IAAI;YACnB,SAAS;QACX;IACF,EAAE,OAAO,OAAY;QACnB,OAAO;YACL,SAAS;YACT,SAAS,MAAM,QAAQ,EAAE,MAAM,UAAU;QAC3C;IACF;AACF;AAGO,MAAM,WAAW;IACtB,IAAI;QACF,MAAM,WAAW,MAAM,IAAI,GAAG,CAAC;QAC/B,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAY;QACnB,MAAM,IAAI,MAAM,MAAM,QAAQ,EAAE,MAAM,UAAU;IAClD;AACF;AAEO,MAAM,aAAa,OAAO,SAAiB;IAChD,IAAI;QACF,MAAM,WAAW,MAAM,IAAI,IAAI,CAAC,UAAU;YACxC;YACA,SAAS;QACX;QACA,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAY;QACnB,MAAM,IAAI,MAAM,MAAM,QAAQ,EAAE,MAAM,UAAU;IAClD;AACF;AAEO,MAAM,iBAAiB,OAAO,QAAgB,QAAgB;IACnE,IAAI;QACF,MAAM,WAAW,MAAM,IAAI,IAAI,CAAC,CAAC,OAAO,EAAE,OAAO,MAAM,CAAC,EAAE;YACxD,SAAS;YACT;QACF;QACA,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAY;QACnB,MAAM,IAAI,MAAM,MAAM,QAAQ,EAAE,MAAM,UAAU;IAClD;AACF;AAEA,8DAA8D;AAC9D,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC5B,MAAM,QAAQ,aAAa,OAAO,CAAC;IACnC,IAAI,OAAO;QACT,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;IAClD;IACA,OAAO;AACT;uCAEe","debugId":null}},
    {"offset": {"line": 224, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/joaov/OneDrive/%C3%81rea%20de%20Trabalho/programa%C3%A7%C3%A3o/trilha/projeto3-trilha/front/src/app/home/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { getPosts, createPost, handleReaction } from \"../../services/api\";\r\n\r\ntype Post = {\r\n  id: number;\r\n  content: string;\r\n  user_id: number;\r\n  likes: number;\r\n  dislikes: number;\r\n};\r\n\r\nexport default function HomePage() {\r\n  const router = useRouter();\r\n  const [posts, setPosts] = useState<Post[]>([]);\r\n  const [content, setContent] = useState(\"\");\r\n  const [loading, setLoading] = useState(true);\r\n  const [currentUser, setCurrentUser] = useState<{id: number} | null>(null);\r\n\r\n  useEffect(() => {\r\n    const userData = localStorage.getItem(\"currentUser\");\r\n    if (!userData) {\r\n      router.replace(\"/\");\r\n    } else {\r\n      setCurrentUser(JSON.parse(userData));\r\n      loadPosts();\r\n    }\r\n  }, [router]);\r\n\r\n  const loadPosts = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const data = await getPosts();\r\n      setPosts(data);\r\n    } catch (error) {\r\n      console.error(\"Error loading posts:\", error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleSubmitPost = async () => {\r\n    if (!content.trim() || !currentUser) return;\r\n    \r\n    try {\r\n      await createPost(content, currentUser.id);\r\n      setContent(\"\");\r\n      await loadPosts();\r\n    } catch (error) {\r\n      console.error(\"Error creating post:\", error);\r\n    }\r\n  };\r\n\r\n  const handleReaction = async (postId: number, type: 'like' | 'dislike') => {\r\n    if (!currentUser) return;\r\n\r\n    try {\r\n      await handleReaction(postId, currentUser.id, type); \r\n      await loadPosts();\r\n    } catch (error) {\r\n      console.error(\"Error reacting to post:\", error);\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    localStorage.removeItem(\"currentUser\");\r\n    router.replace(\"/\");\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"text-center p-4\">Carregando posts...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen p-4 max-w-2xl mx-auto\">\r\n      <header className=\"flex justify-between items-center mb-6\">\r\n        <h1 className=\"text-2xl font-bold\">Feed</h1>\r\n        <button \r\n          onClick={handleLogout}\r\n          className=\"bg-red-500 text-white px-4 py-2 rounded\"\r\n        >\r\n          Sair\r\n        </button>\r\n      </header>\r\n\r\n      <div className=\"mb-6\">\r\n        <textarea\r\n          value={content}\r\n          onChange={(e) => setContent(e.target.value)}\r\n          placeholder=\"O que voc√™ est√° pensando?\"\r\n          className=\"w-full p-2 border rounded mb-2\"\r\n        />\r\n        <button\r\n          onClick={handleSubmitPost}\r\n          disabled={!content.trim()}\r\n          className=\"bg-blue-500 text-white px-4 py-2 rounded disabled:bg-gray-300\"\r\n        >\r\n          Postar\r\n        </button>\r\n      </div>\r\n\r\n      <div className=\"space-y-4\">\r\n        {posts.length === 0 ? (\r\n          <p className=\"text-center\">Nenhum post ainda. Seja o primeiro!</p>\r\n        ) : (\r\n          posts.map((post) => (\r\n            <div key={post.id} className=\"p-4 border rounded shadow\">\r\n              <p className=\"mb-2\">{post.content}</p>\r\n              <div className=\"flex space-x-4\">\r\n                <button\r\n                  onClick={() => handleReaction(post.id, 'like')}\r\n                  className=\"bg-green-100 text-green-800 px-3 py-1 rounded\"\r\n                >\r\n                  üëç {post.likes}\r\n                </button>\r\n                <button\r\n                  onClick={() => handleReaction(post.id, 'dislike')}\r\n                  className=\"bg-red-100 text-red-800 px-3 py-1 rounded\"\r\n                >\r\n                  üëé {post.dislikes}\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ))\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAce,SAAS;IACtB,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IACvB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU,EAAE;IAC7C,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACvC,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAuB;IAEpE,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,WAAW,aAAa,OAAO,CAAC;QACtC,IAAI,CAAC,UAAU;YACb,OAAO,OAAO,CAAC;QACjB,OAAO;YACL,eAAe,KAAK,KAAK,CAAC;YAC1B;QACF;IACF,GAAG;QAAC;KAAO;IAEX,MAAM,YAAY;QAChB,IAAI;YACF,WAAW;YACX,MAAM,OAAO,MAAM,CAAA,GAAA,sHAAA,CAAA,WAAQ,AAAD;YAC1B,SAAS;QACX,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,wBAAwB;QACxC,SAAU;YACR,WAAW;QACb;IACF;IAEA,MAAM,mBAAmB;QACvB,IAAI,CAAC,QAAQ,IAAI,MAAM,CAAC,aAAa;QAErC,IAAI;YACF,MAAM,CAAA,GAAA,sHAAA,CAAA,aAAU,AAAD,EAAE,SAAS,YAAY,EAAE;YACxC,WAAW;YACX,MAAM;QACR,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,wBAAwB;QACxC;IACF;IAEA,MAAM,iBAAiB,OAAO,QAAgB;QAC5C,IAAI,CAAC,aAAa;QAElB,IAAI;YACF,MAAM,eAAe,QAAQ,YAAY,EAAE,EAAE;YAC7C,MAAM;QACR,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,2BAA2B;QAC3C;IACF;IAEA,MAAM,eAAe;QACnB,aAAa,UAAU,CAAC;QACxB,OAAO,OAAO,CAAC;IACjB;IAEA,IAAI,SAAS;QACX,qBAAO,8OAAC;YAAI,WAAU;sBAAkB;;;;;;IAC1C;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAO,WAAU;;kCAChB,8OAAC;wBAAG,WAAU;kCAAqB;;;;;;kCACnC,8OAAC;wBACC,SAAS;wBACT,WAAU;kCACX;;;;;;;;;;;;0BAKH,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,OAAO;wBACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;wBAC1C,aAAY;wBACZ,WAAU;;;;;;kCAEZ,8OAAC;wBACC,SAAS;wBACT,UAAU,CAAC,QAAQ,IAAI;wBACvB,WAAU;kCACX;;;;;;;;;;;;0BAKH,8OAAC;gBAAI,WAAU;0BACZ,MAAM,MAAM,KAAK,kBAChB,8OAAC;oBAAE,WAAU;8BAAc;;;;;2BAE3B,MAAM,GAAG,CAAC,CAAC,qBACT,8OAAC;wBAAkB,WAAU;;0CAC3B,8OAAC;gCAAE,WAAU;0CAAQ,KAAK,OAAO;;;;;;0CACjC,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCACC,SAAS,IAAM,eAAe,KAAK,EAAE,EAAE;wCACvC,WAAU;;4CACX;4CACK,KAAK,KAAK;;;;;;;kDAEhB,8OAAC;wCACC,SAAS,IAAM,eAAe,KAAK,EAAE,EAAE;wCACvC,WAAU;;4CACX;4CACK,KAAK,QAAQ;;;;;;;;;;;;;;uBAbb,KAAK,EAAE;;;;;;;;;;;;;;;;AAsB7B","debugId":null}}]
}